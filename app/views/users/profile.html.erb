<center>
<h1> My Profile </h1>

<legend>Personal information:</legend>

<img src="<%= current_user.image_url %>" height="72" weight="72">
<p><h4><%= current_user.name %></h4></p>
<b>Location: </b><p><%= current_user.city.name %></p>
<b>Email: </b><%= current_user.email %><br></p>


<center><%= link_to "Edit", edit_user_path(current_user), :class => "btn btn-info btn-sm"%>
<%= link_to "Make New Trip", new_trip_path, :class => "btn btn-info btn-sm"%>
<%= link_to "Make New Activity", new_activity_path, :class => "btn btn-info btn-sm"%></center>

<center><br><b>You are Hosting the Following activities:</b></br>
<% current_user.activities.each do |activity| %>
  <p><%= link_to(activity.name, activity_path(activity)) %></p>
<% end %></center>

<center><br><b>Upcoming Trips:</b></br>
  <%if current_user.trips.empty? %>
  <%="No Upcoming Trips"%>
  <%else%>   
    <% current_user.trips.each do |trip|%>
      <% if trip.start_date > Date.today%>
        <%= link_to(trip.city.name, trip_path(trip)) %>
      <%end%>   
    <%end%></center>
  <%end%>   



<center><br><b>Past Trips:</b></br>
  <% current_user.trips.each do |trip|%>
    <% if trip.start_date < Date.today%>
      <%= link_to(trip.city.name, trip_path(trip)) %>
    <%end%> 
  <%end%></center>

<h2>Requested Tours</h2>

Accepted Tours:<br>
  <% current_user.accepted_led_tours.each do |tour| %><br>
    <ul><%= link_to(tour.activity.name, activity_path(tour.activity)) %>
    <ul><%= link_to(tour.trip.tourist.name, user_path(tour.trip.tourist)) %>
    <ul><li><%=tour.start_time.to_formatted_s(:long_ordinal)%></ul>
    <li><%=tour.end_time.to_formatted_s(:long_ordinal)%></li></ul>
  <%end%>
Rejected Tours:<br>
  <% current_user.rejected_led_tours.each do |tour| %><br>
    <li><%= link_to(tour.activity.name, activity_path(tour.activity)) %>
    <li><%= link_to(tour.trip.tourist.name, user_path(tour.trip.tourist)) %>
    <ul><li><%=tour.start_time.to_formatted_s(:long_ordinal)%></li>
    <li><%=tour.end_time.to_formatted_s(:long_ordinal)%></li></ul>
  <%end%>
Pending Tours:<br>
  <% current_user.pending_led_tours.each do |tour| %><br>
    <li><%= link_to(tour.activity.name, activity_path(tour.activity)) %>
    <li><%= link_to(tour.trip.tourist.name, user_path(tour.trip.tourist)) %>
    <ul><li><%=tour.start_time.to_formatted_s(:long_ordinal)%></li>
    <li><%=tour.end_time.to_formatted_s(:long_ordinal)%></li></ul>

    <%= form_for tour do |f| %>
      <%= f.hidden_field :status, :value => "accepted" %>
      <%= f.submit "Accept" %>
    <% end %>

    <%= form_for tour do |f| %>
      <%= f.hidden_field :status, :value => "rejected" %>
      <%= f.submit "Reject" %>
    <% end %>
  <%end%>

